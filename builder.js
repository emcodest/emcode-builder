if($(function(){window.localStorage.getItem("SAVE_PAGE")&&$("#page-wrapper").html(window.localStorage.getItem("SAVE_PAGE")),ConfigEditor(),Dragger()}),dashboard.$set(dashboard.mobj,"BUILDER_BLOCKS",[{attr_id:"text-block",icon:"fa fa-text-width fa-2x",text:" Text Block / Predefined Text"},{attr_id:"spacer-block",icon:"fa fa-arrows-h fa-2x",text:"SPACER BLOCK"},{attr_id:"image-block",icon:"fa fa-picture-o fa-2x",text:"Image"},{attr_id:"video-block",icon:"fa fa-video-camera fa-2x",text:"Video"},{attr_id:"cta-block",icon:"fa fa-rocket fa-2x",text:"CTA Button"},{attr_id:"bonus-block",icon:"fa fa-list fa-2x",text:"Bonus Block"},{attr_id:"countdowntimer-block",icon:"fa fa-clock-o fa-2x",text:"Countdown Timer"},{attr_id:"social-block",icon:"fa fa-thumbs-o-up fa-2x",text:"Social Share"}]),dashboard.$set(dashboard.mobj,"SETTINGS_BUILDER_BLOCKS",[{attr_id:"page-setting",icon:"fa fa-gear fa-2x",text:"Page Settings"},{attr_id:"seo",icon:"fa fa-tags fa-2x",text:"SEO"},{attr_id:"page-colors",icon:"fa fa-cube fa-2x",text:"Page Colors"},{attr_id:"bonus-delivery-page",icon:"fa fa-truck fa-2x",text:"Bonus Delivery Page"}]),methods.ShowModal=function(){$("#builder-modal-id").modal("show")},methods.HideModal=function(){$("#builder-modal-id").modal("hide")},methods.CloneBlock=function(t,e){let o=e.parent().parent().find(".design-content").attr("id"),n=e.parent().parent().find(".design-content").attr("btype"),a=o+"-"+(new Date).getTime(),i=e.parent().parent().clone();i.find(".design-content").attr("id",a),e.parent().parent().parent().find("#"+o).parent().last().after(i),"text-block"==n&&(CKEDITOR.config.extraPlugins="ckeditor-gwf-plugin",CKEDITOR.config.toolbar=[["Bold","Italic","Underline","Strike","TextColor","BGColor","Image","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock","NumberedList","BulletedList","Font","FontSize","Format","Link","Unlink","Video","VideoEmbed","Styles","Smiley"]],CKEDITOR.inline(a));var l=window.localStorage.getItem("BUILDER_APPLY_BLOCK"),c=JSON.parse(l);for(var r in c)c[r].id==o&&(c.push({id:a,content:c[r].content}),window.localStorage.setItem("BUILDER_APPLY_BLOCK",JSON.stringify(c)))},methods.ConfirmDeleteBlock=function(t,e){var o=window._this.parent().parent().find(".design-content").attr("id"),n=window.localStorage.getItem("BUILDER_APPLY_BLOCK"),a=JSON.parse(n);for(var i in a)a[i].id==o&&(a.splice(i,1),n=JSON.stringify(a),window.localStorage.setItem("BUILDER_APPLY_BLOCK",n));methods.HideModal(),window._this.parent().parent().remove()},methods.ResetModal=function(){$(".modal-dialog").removeClass("modal-lg"),$(".modal-dialog").css("overflow-y","hidden"),$(".modal-dialog").css("height","auto")},methods.DeleteBlock=function(t,e){methods.ResetModal(),window._this=e,SbModalTitle("Do you want to delete?"),SbModalBody("This action is irreversible"),SbModalFooter("<button func = 'HideModal' class = 'btn btn-success click'>Cancel</button> <button class = 'btn btn-danger click' func = 'ConfirmDeleteBlock'>Confirm</button>"),methods.ShowModal()},methods.PreviewBonus=function(t){FetchABonus(t)},methods.SelectBonus=async function(t){var e=await SelectABonus(t);window.localStorage.setItem("CURRENT_BONUS",e),$("[func=SaveBLOCK]").trigger("click")},methods.SwitchBonusCategory=function(t,e){var o=e.val();FetchBonusCategoryContent(o)},methods.ProcessTypes=function(t,e){var o=-1;for(let n of t)switch(n.type){case"input":case"number":case"text":case"date":$("."+e).find("."+n.name).val(n.output);break;case"datetimer":setTimeout(()=>{$("."+e).find("."+n.name).data("DateTimePicker").date(new Date(n.output))},1e3);break;case"select":$("."+e).find("."+n.name).val(n.output);break;case"checkbox":$("."+e).find("."+n.name).prop("checked",n.output);break;case"textarea":$("."+e).find("."+n.name).val(n.output);break;case"color_picker":setTimeout(()=>{o++,$("."+e).find(".pickr > .pcr-button").eq(o).css("color",n.output)},500);break;case"ckeditor":CKEDITOR.instances[n.instance].setData(n.output)}},methods.UpdatePOP2=function(t,e){var o=window.localStorage.getItem("BUILDER_PAGE_SETTINGS");if(o){var n=JSON.parse(o);for(let e of n)e.id==t&&methods.ProcessTypes(e.content,t)}},methods.UpdatePOP=function(t,e,o){var n=window.localStorage.getItem("BUILDER_APPLY_BLOCK");if(n){var a=JSON.parse(n);for(let e of a)e.id==t&&methods.ProcessTypes(e.content,t)}},methods.InsertText=function(t,e){var o=CKEDITOR.instances[t],n=e.parent().find(".insert_text_to_block").val();o.setData(n),methods.HideModal()},methods.OpenSettings=function(t,e){methods.ResetModal();let o=e.parent().parent().find(".design-content").attr("btype"),n=e.parent().parent().find(".design-content").attr("id");switch(o){case"text-block":var a=!1,i=[],l={id:n,block_type:o,content:s=[{name:"hide_countdown",type:"checkbox",css:!1,insert:!1,output:!1},{name:"block_color",type:"color_picker",css:"background: #FFFFFF",insert:!1,output:"#FFFFFF"},{name:"block_width",type:"select",css:"width: 100%",insert:!1,output:"width: 100%"},{name:"insert_text_to_block",type:"select",css:!1,insert:!0,output:""},{name:"css",type:"textarea",css:"apply",insert:!1,output:"margin: 0px\n padding: 0px"}]};if(d=window.localStorage.getItem("BUILDER_APPLY_BLOCK")){i=JSON.parse(d);for(let t of i)t.id==n&&(a=t.content)}a||(i.push(l),window.localStorage.setItem("BUILDER_APPLY_BLOCK",JSON.stringify(i))),SbModalTitle("TEXT BLOCK SETTINGS...");let t=ConstructUI([{name:"Hide this block With Countdown",html_input:"<input class = 'hide_countdown' type = 'checkbox' />"},{name:"<b class = 'block-color-x'>BLOCK COLOR</b>",html_input:"<button class = 'click color-picker block_color' func = 'InitColor' style = 'background: #ffffff; border: 1px solid #000'><i class = 'fa fa-chevron-down'></i></button>"},{name:"WIDTH",html_input:"<select class = 'form-control block_width'><option value = 'width: 100%'>Contained</option><option value = 'width: 85%'>85% Width</option><option value = 'width: 100%'>Page Width</option><option value = 'width: 100%'>Background</option></select>"},{name:"INSERT TEXT",html_input:"<select class = 'form-control insert_text_to_block'><option value = ''>--select--</option><option value = 'Remember Your Order Must Be Credited To Our Promotion.  To Ensure The Correct Cookie Is Set Please First Clear Your Browser Cookies.  If You`re Not Sure How To Do This Click Here.'>Clearing Cookie</option><option value = 'Your Bonuses Will Be Delivered Automatically, You`ll Find Them Next To Your Purchased Files In JVZoo/Zaxaa.'>Submitting bonus claim</option><option value = 'Affiliate Disclaimer:While we receive affiliate compensation for reviews or ads on this website, we always offer honest opinion, relevant experiences and genuine views related to the product or service itself. Our goal is to help you make the best purchasing decisions, however, the views and opinions expressed are ours only. As always you should do your own due diligence to verify any claims, results and statistics before making any kind of purchase. Clicking links or purchasing products recommended on this page may generate income for this website from affiliate commissions and you should assume we are compensated for any purchases you make.'>Affiliate Disclaimer</option><option value = 'Navigation: Privacy | Disclaimer | Terms | DMCA | FTC | Copyright | Social Media | Anti-Spam (<- you need to set hyperlinks to your legal pages then remove this bracketed text)'>Legal Links</option></select> <br> <button params = '"+n+"' func = 'InsertText' class = 'btn btn-primary btn-sm click'>Insert</button>"},{name:"<b>CSS PROPERTIES</b> (separate with new line)",html_input:"<textarea rows = '5' class = 'form-control css'></textarea>"}]);SbModalBody("<div class = '"+n+"'>"+t+"</div>"),SbModalFooter("<button func = 'HideModal' class = 'btn btn-danger btn-sm click'>cancel</button><button func = 'SaveBLOCK' params = '"+n+"' class = 'btn btn-sm btn-primary click' btype = '"+o+"'>save changes</button>"),methods.ShowModal(),setTimeout(()=>{methods.InitColor(),$(".color-picker").each(function(t,e){setTimeout(()=>{$(this).trigger("click")},500)}),methods.UpdatePOP(n,o,s)},500);break;case"spacer-block":a=!1,i=[],l={id:n,block_type:o,content:s=[{name:"height",type:"number",css:"height: 20px",insert:!1,output:"20",unit:"px"},{name:"block_color",type:"color_picker",css:"background: #FFFFFF",insert:!1,output:"#FFFFFF"}]};if(d=window.localStorage.getItem("BUILDER_APPLY_BLOCK")){i=JSON.parse(d);for(let t of i)t.id==n&&(a=t.content)}a||(i.push(l),window.localStorage.setItem("BUILDER_APPLY_BLOCK",JSON.stringify(i))),SbModalTitle("SPACER BLOCK SETTINGS...");let e=ConstructUI([{name:"<b class = 'block-color-x'>BLOCK COLOR</b>",html_input:"<button class = 'click color-picker block_color' func = 'InitColor' style = 'background: #ffffff; border: 1px solid #000'><i class = 'fa fa-chevron-down'></i></button>"},{name:"HEIGHT(px)",html_input:"<input  class = 'form-control height' type = 'number' />"}]);SbModalBody("<div class = '"+n+"'>"+e+"</div>"),SbModalFooter("<button func = 'HideModal' class = 'btn btn-danger btn-sm click'>cancel</button><button func = 'SaveBLOCK' params = '"+n+"' class = 'btn btn-sm btn-primary click' btype = '"+o+"'>save changes</button>"),methods.ShowModal(),setTimeout(()=>{methods.InitColor(),$(".color-picker").each(function(t,e){setTimeout(()=>{$(this).trigger("click")},500)}),methods.UpdatePOP(n,o,s)},500);break;case"image-block":a=!1,i=[],l={id:n,block_type:o,content:s=[{name:"block_color",type:"color_picker",css:"background: #FFFFFF",insert:!1,output:"#FFFFFF"},{name:"new_window",type:"checkbox",css:!1,insert:!1,output:!0},{name:"link_url",type:"input",css:!1,insert:!1,output:"https://google.com"},{name:"image_position",type:"select",css:"text-align: center",insert:!1,output:"text-align: center"},{name:"width",type:"select",css:"width: 100%",insert:!1,output:"width: 100%"},{name:"css",type:"textarea",css:"apply",insert:!1,output:"padding: 0px\nmargin: 0px"},{name:"image_url",type:"text",css:!1,insert:!1,output:"https://via.placeholder.com/300x150.png/ffd747?text=350%20by%20150",unit:"px"}]};if(d=window.localStorage.getItem("BUILDER_APPLY_BLOCK")){i=JSON.parse(d);for(let t of i)t.id==n&&(a=t.content)}a||(i.push(l),window.localStorage.setItem("BUILDER_APPLY_BLOCK",JSON.stringify(i))),SbModalTitle("IMAGE BLOCK SETTINGS...");let u=ConstructUIFull([{name:"<b class = 'block-color-x'>BLOCK COLOR</b>",html_input:"<button class = 'click color-picker block_color' func = 'InitColor' style = 'background: #ffffff; border: 1px solid #000'><i class = 'fa fa-chevron-down'></i></button>"},{name:"IMAGE URL",html_input:"<input class = 'form-control image_url' type ='text' placeholder = 'image URL' />"},{name:"LINK FOR IMAGE <b>New Window </b> <input class = 'new_window' type = 'checkbox' />",html_input:"<input class = 'form-control link_url' type ='text' placeholder = 'link for image' />"},{name:"Image Position",html_input:"<select class = 'form-control image_position'><option value = 'text-align: left'>Left Align</option><option value = 'text-align: center'>Centered</option><option value = 'text-align: right'>Right Align</option></select>",flex:"col-md-6 col-lg-6"},{name:"Width",html_input:"<select class = 'form-control width'><option value = 'width: 100%'>Contained</option><option value = 'width: 50%'>50% Image Width</option><option value = 'width: 85%'>Page Width</option></select>",flex:"col-md-6 col-lg-6"},{name:"<b>CSS PROPERTIES</b> (separate with new line)",html_input:"<textarea rows = '5' class = 'form-control css'></textarea>"}]);SbModalBody("<div class = '"+n+"'>"+u+"</div>"),SbModalFooter("<button func = 'HideModal' class = 'btn btn-danger btn-sm click'>cancel</button><button func = 'SaveBLOCK' params = '"+n+"' class = 'btn btn-sm btn-primary click' btype = '"+o+"'>save changes</button>"),methods.ShowModal(),setTimeout(()=>{methods.InitColor(),$(".color-picker").each(function(t,e){setTimeout(()=>{$(this).trigger("click")},500)}),methods.UpdatePOP(n,o,s)},500);break;case"video-block":a=!1,i=[],l={id:n,block_type:o,content:s=[{name:"block_color",type:"color_picker",css:"background: #FFFFFF",insert:!1,output:"#FFFFFF"},{name:"width",type:"select",css:"width: 100%",insert:!1,output:"width: 100%"},{name:"align",type:"select",css:"text-align: center",insert:!1,output:"text-align: center"},{name:"embed_code",type:"textarea",css:!1,insert:!1,output:'<iframe src="https://player.vimeo.com/video/396483959" width="100%" height="460" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe>'},{name:"autoplay",type:"checkbox",css:!1,insert:!1,output:!1}]};if(d=window.localStorage.getItem("BUILDER_APPLY_BLOCK")){i=JSON.parse(d);for(let t of i)t.id==n&&(a=t.content)}a||(i.push(l),window.localStorage.setItem("BUILDER_APPLY_BLOCK",JSON.stringify(i))),SbModalTitle("VIDEO BLOCK SETTINGS...");var c=[{name:"<b class = 'block-color-x'>BLOCK COLOR</b>",html_input:"<button class = 'click color-picker block_color' func = 'InitColor' style = 'background: #ffffff; border: 1px solid #000'><i class = 'fa fa-chevron-down'></i></button>"},{name:"WIDTH",html_input:"<select class = 'form-control width'><option value = 'width: 100%'>Contained</option><option value = 'width auto'>Page Width</option></select>",flex:"col-md-6 col-lg-6"},{name:"Align",html_input:"<select class = 'form-control align'><option value = 'text-align: left'>Left</option><option value = 'text-align: center'>Center</option><option value = 'text-align: right'>Right</option></select>",flex:"col-md-6 col-lg-6"},{name:"",html_input:"<p><b>Paste in responsive embed code from EVS or IFRAME embed from YouTube/Vimeo/Vooplayer/Wistia or MP4 Video URL</b></p>"},{name:"",html_input:"<textarea style = 'border: 1px solid #333' rows = '5' class = 'form-control embed_code'></textarea>"},{name:"Auto play if possible",html_input:"<input type = 'checkbox' class = 'autoplay' />",flex:"col-md-6 col-lg-6"}],r=ConstructUIFull(c);SbModalBody("<div class = '"+n+"'>"+r+"</div>"),SbModalFooter("<button func = 'HideModal' class = 'btn btn-danger btn-sm click'>cancel</button><button func = 'SaveBLOCK' params = '"+n+"' class = 'btn btn-sm btn-primary click' btype = '"+o+"'>save changes</button>"),methods.ShowModal(),setTimeout(()=>{methods.InitColor(),$(".color-picker").each(function(t,e){setTimeout(()=>{$(this).trigger("click")},500)}),methods.UpdatePOP(n,o,s)},500);break;case"cta-block":a=!1,i=[],l={id:n,block_type:o,content:s=[{name:"font_style",type:"select",css:!1,insert:!1,output:"font-family: Arial"},{name:"text_color",type:"color_picker",css:"background: #FFFFFF",insert:!1,output:"#000000"},{name:"block_color",type:"color_picker",css:"background: #FFFFFF",insert:!1,output:"#FFFFFF"},{name:"width",type:"select",css:"width: 100%",insert:!1,output:"width: auto"},{name:"main_text_button",type:"input",css:"width: 100%",insert:!1,output:"CHECK THIS OUT NOW - CLICK HERE"},{name:"sub_button_text",type:"input",css:"width: 100%",insert:!1,output:""},{name:"button_first_color",type:"color_picker",css:"background: #FFFFFF",insert:!1,output:"#FFFFFF"},{name:"button_second_color",type:"color_picker",css:"background: #000000",insert:!1,output:"#0000EF"},{name:"angle",type:"number",css:!1,insert:!1,output:70},{name:"stripe",type:"select",css:!1,insert:!1,output:"none"},{name:"border_thickness",type:"number",css:!1,insert:!1,output:1},{name:"border_curve",type:"number",css:!1,insert:!1,output:"1"},{name:"border_color",type:"color_picker",css:"background: #FFFFFF",insert:!1,output:"#FFFFFF"},{name:"link_override",type:"input",css:!1,insert:!1,output:""},{name:"new_window",type:"checkbox",css:!1,insert:!1,output:!0},{name:"cta_position",type:"select",css:!1,insert:!1,output:"text-align: center"},{name:"wide",type:"checkbox",css:!1,insert:!1,output:!0},{name:"drop_shadow",type:"select",css:!1,insert:!1,output:"box-shadow: rgb(0, 0, 0) 0px 0px 0px 0px"}]};if(d=window.localStorage.getItem("BUILDER_APPLY_BLOCK")){i=JSON.parse(d);for(let t of i)t.id==n&&(a=t.content)}a||(i.push(l),window.localStorage.setItem("BUILDER_APPLY_BLOCK",JSON.stringify(i))),SbModalTitle("CTA BLOCK SETTINGS...");c=[{name:"<b>FONT STYLE</b>",html_input:"<select class = 'form-control font_style'><option value='font-family: Arial'>Arial</option><option value='font-family: Verdana'>Verdana </option><option value='font-family: Impact'>Impact </option><option value='font-family: Comic Sans MS'>Comic Sans MS</option></select>",flex:"col-md-3 col-lg-3"},{name:"<b>TEXT COLOR</b>",html_input:"<button class = 'click color-picker text-color' func = 'InitColor' style = 'background: #ffffff; border: none'><i class = 'fa fa-chevron-down'></i></button>",flex:"col-md-3 col-lg-3"},{name:"<b>BLOCK COLOR</b>",html_input:"<button class = 'click color-picker block_color' func = 'InitColor' style = 'background: #000000; border: none'><i class = 'fa fa-chevron-down'></i></button>",flex:"col-md-3 col-lg-3"},{name:"WIDTH",html_input:"<select class = 'form-control width'><option value = 'width: auto'>Auto</option><option value = 'width: 100%'>Contained</option><option value = 'width: 85%'>85% Width</option><option value = 'width: 100%'>Page Width</option><option value = 'width: 50%'>50% Width</option></select>",flex:"col-md-3 col-lg-3"},{name:"MAIN TEXT BUTTON",html_input:"<input  class = 'form-control main_text_button' type = 'text' />",flex:"col-md-6 col-lg-6"},{name:"SUB BUTTON TEXT",html_input:"<input class = 'form-control sub_button_text' type = 'text' />",flex:"col-md-6 col-lg-6"},{name:"<b>BUTTON FIRST COLOR</b>",html_input:"<button class = 'click color-picker button_first_color' func = 'InitColor' style = 'background: #ffffff; border: none'><i class = 'fa fa-chevron-down'></i></button>",flex:"col-md-4 col-lg-4"},{name:"<b>BUTTON SECOND COLOR</b>",html_input:"<button class = 'click color-picker button_second_color' func = 'InitColor' style = 'background: #ffffff; border: none'><i class = 'fa fa-chevron-down'></i></button>",flex:"col-md-4 col-lg-4"},{name:"ANGLE",html_input:"<input steps = '10' min = '0' max = '360' class = 'form-control angle' type = 'number' />",flex:"col-md-2 col-lg-2"},{name:"STRIPE",html_input:"<select class = 'form-control stripe'><option value = 'none'>None</option><option value = 'narrow'>Narrow</option><option value = 'medium'>Medium</option><option value = 'wide'>Wide</option></select>",flex:"col-md-2 col-lg-2"},{name:"BORDER THICKNESS",html_input:"<input class = 'form-control border_thickness' type = 'number' />",flex:"col-md-4 col-lg-4"},{name:"BORDER CURVE",html_input:"<input class = 'form-control border_curve' type = 'number' />",flex:"col-md-4 col-lg-4"},{name:"<b>BORDER COLOR</b>",html_input:"<button class = 'click color-picker border_color' func = 'InitColor' style = 'background: #ffffff; border: none'><i class = 'fa fa-chevron-down'></i></button>",flex:"col-md-4 col-lg-4"},{name:"LINK OVERRIDE",html_input:"<input class = 'form-control link_override' type = 'text' />",flex:"col-md-8 col-lg-8"},{name:"<br>New Window",html_input:"<br><input class = 'new_window' type = 'checkbox' />",flex:"col-md-4 col-lg-4"},{name:"CTA POSITION",html_input:"<select class = 'form-control cta_position'><option value = 'text-align: left'>Left Align</option><option value = 'text-align: center'>Centered</option><option value = 'text-align: right'>Right Align</option></select>",flex:"col-md-8 col-lg-8"},{name:"<br>Wide",html_input:"<br><input type = 'checkbox' class = 'wide' />",flex:"col-md-4 col-lg-4"},{name:"DROP SHADOW",html_input:"<select class = 'form-control drop_shadow'><option value = 'box-shadow: rgb(0, 0, 0) 0px 0px 0px 0px;'>None</option><option value = 'box-shadow: rgb(0, 0, 0) 3px 3px 2px 3px;'>Dark</option><option value = 'box-shadow: rgb(238, 238, 238) 6px 6px 4px 6px;'>Medium</option><option value = 'box-shadow: rgb(238, 238, 238) 3px 3px 2px 3px;'>Light</option></select>",flex:"col-md-8 col-lg-8"},{name:"",html_input:"<div style = 'text-align: center' class = 'cta-block-wrapper'><div class = 'cta' style='display: inline-block; white-space: nowrap; color: rgb(255, 255, 255); margin: 0px auto; font-size: 32px; padding-left: 10px; padding-right: 10px; padding-top: 6px; padding-bottom: 6px; border: 4px solid rgb(255, 255, 255); text-align: center; font-family: Open Sans; font-weight: 800; background: rgba(0, 0, 0, 0) -webkit-linear-gradient(270deg, rgb(100, 204, 52), rgb(74, 161, 33)) repeat scroll 0% 0%; border-radius: 9px; box-shadow: rgb(238, 238, 238) 3px 3px 2px 3px;'><span>CHECK THIS OUT NOW</span><p style = 'font-size: 16px' class = 'cta-sub'></p></div></div>",flex:"col-md-12 col-lg-12"}],r=ConstructUIFull(c);SbModalBody(r),$(".modal-dialog").addClass("modal-lg"),$(".modal-dialog").css("overflow-y","scroll"),$(".modal-dialog").css("height","600px"),SbModalBody("<div class = '"+n+"'>"+r+"</div>"),SbModalFooter("<button func = 'HideModal' class = 'btn btn-danger btn-sm click'>cancel</button><button func = 'SaveBLOCK' params = '"+n+"' class = 'btn btn-sm btn-primary click' btype = '"+o+"'>save changes</button>"),methods.ShowModal(),setTimeout(()=>{methods.InitColor(),$(".color-picker").each(function(t,e){setTimeout(()=>{$(this).trigger("click")},500)}),methods.UpdatePOP(n,o,s)},500),setTimeout(()=>{SetCTA(n)},2e3),$(document).on("click","[aria-label='color swatch']",function(){var t,e=(t=window.current_color.attr("style")).split(":");switch(t=(t=e[1].trim()).toString().replace(/;/gi,""),window.current_color.parent().parent().find("b").text()){case"TEXT COLOR":$(".cta").css("color",t);break;case"BUTTON FIRST COLOR":var o=CTAGetColor(n,"BUTTON FIRST COLOR"),a="rgba(0, 0, 0, 0) -webkit-linear-gradient(270deg, "+t+", "+CTAGetColor(n,"BUTTON SECOND COLOR")+") repeat scroll 0% 0%".toString().replace(/;/gi,"");$(".cta").css("background",a);break;case"BUTTON SECOND COLOR":o=CTAGetColor(n,"BUTTON FIRST COLOR"),CTAGetColor(n,"BUTTON SECOND COLOR"),a="rgba(0, 0, 0, 0) -webkit-linear-gradient(270deg, "+o+", "+t+") repeat scroll 0% 0%".toString().replace(/;/gi,"");$(".cta").css("background",a);break;case"BORDER COLOR":var i=$(".border_thickness").val()+"px solid "+t;$(".cta").css("border",i)}}),$(document).on("mousedown",".pcr-color-palette",function(){var t,e=(t=window.current_color.attr("style")).split(":");switch(t=(t=e[1].trim()).toString().replace(/;/gi,""),window.current_color.parent().parent().find("b").text()){case"TEXT COLOR":$(".cta").css("color",t);break;case"BUTTON FIRST COLOR":var o=CTAGetColor(n,"BUTTON FIRST COLOR"),a="rgba(0, 0, 0, 0) -webkit-linear-gradient(270deg, "+t+", "+CTAGetColor(n,"BUTTON SECOND COLOR")+") repeat scroll 0% 0%".toString().replace(/;/gi,"");$(".cta").css("background",a);break;case"BUTTON SECOND COLOR":o=CTAGetColor(n,"BUTTON FIRST COLOR"),CTAGetColor(n,"BUTTON SECOND COLOR"),a="rgba(0, 0, 0, 0) -webkit-linear-gradient(270deg, "+o+", "+t+") repeat scroll 0% 0%".toString().replace(/;/gi,"");$(".cta").css("background",a);break;case"BORDER COLOR":var i=$(".border_thickness").val()+"px solid "+t;$(".cta").css("border",i)}}),$(document).on("click",".pcr-button",function(){window.current_color=$(this)});[".main_text_button",".sub_button_text",".font_style",".width",".angle",".stripe",".border_thickness",".border_curve",".cta_position",".drop_shadow"].forEach(function(t){switch(t){case".main_text_button":$(document).on("keyup",t,function(){var t=$(this).val();$(".cta span").text(t)});break;case".sub_button_text":$(document).on("keyup",t,function(){var t=$(this).val();$(".cta-sub").text(t)});break;case".font_style":case".width":$(document).on("change",t,function(){var t=$(this).val().split(":");$(".cta").css(t[0],t[1])});break;case".angle":$(document).on("change",t,function(){var t=parseInt($(this).val())+10;t>360&&(t=360),t<10&&(t=10);var e="rgba(0, 0, 0, 0) -webkit-linear-gradient("+t+"deg, "+CTAGetColor(n,"BUTTON FIRST COLOR")+", "+CTAGetColor(n,"BUTTON SECOND COLOR")+") repeat scroll 0% 0%".toString().replace(/;/gi,"");$(".cta").css("background",e)});break;case".stripe":$(document).on("change",t,function(){var t=$(this).val(),e=CTAGetColor(n,"BUTTON FIRST COLOR"),o=CTAGetColor(n,"BUTTON SECOND COLOR"),a=($(".angle"),"repeating-linear-gradient(45deg, "+e+", "+o+" 10px, "+o+" 10px, "+o+" 20px)");if("none"==t)a="repeating-linear-gradient(45deg, "+e+", "+o+" 0px, "+o+" 0px, "+o+" 0px)";if("medium"==t)a="repeating-linear-gradient(45deg, "+e+", "+o+" 30px, "+o+" 30px, "+o+" 40px)";if("wide"==t)a="repeating-linear-gradient(45deg, "+e+", "+o+" 40px, "+o+" 40px, "+o+" 50px)";var i=a.toString().replace(/;/gi,"");$(".cta").css("background",i)});break;case".border_thickness":$(document).on("change",t,function(){var t=$(this).val(),e=CTAGetColor(n,"BORDER COLOR");$(".cta").css("border",t+"px solid "+e)});break;case".border_curve":$(document).on("change",t,function(){var t=$(this).val();$(".cta").css("border-radius",t+"px")});break;case".border_color":$(document).on("change",t,function(){$(this).val()});break;case".drop_shadow":$(document).on("change",t,function(){var t=$(this).val().split(":");$(".cta").css(t[0].trim(),t[1].replace(/;/gi,""))});break;case".cta_position":$(document).on("change",t,function(){$(this).val()})}});break;case"bonus-block":a=!1,i=[],l={id:n,block_type:o,content:s=[{name:"block_color",type:"color_picker",css:"background: #FFFFFF",insert:!1,output:"#FFFFFF"},{name:"width",type:"select",css:"width: 100%",insert:!1,output:"width: 100%"}]};if(d=window.localStorage.getItem("BUILDER_APPLY_BLOCK")){i=JSON.parse(d);for(let t of i)t.id==n&&(a=t.content)}a||(i.push(l),window.localStorage.setItem("BUILDER_APPLY_BLOCK",JSON.stringify(i))),SbModalTitle("BONUS BLOCK SETTINGS...");c=[{name:"<b>BLOCK COLOR</b>",html_input:"<button class = 'click color-picker' func = 'InitColor' style = 'background: #ffffff; border: none'><i class = 'fa fa-chevron-down'></i></button>",flex:"col-md-6 col-lg-6"},{name:"WIDTH",html_input:"<select class = 'form-control width'><option value = 'width: 100%'>Contained</option><option value = 'width: 100%'>Page Width</option></select>",flex:"col-md-6 col-lg-6"},{name:"Select your bonus from the list below - You can change categories here :",html_input:"<div class = 'wrap-bonus-category'>...loading</div>"},{name:"",html_input:"<div class = 'wrap-bonus'>...loading</div>"}],r=ConstructUIFull(c);SbModalBody(r),$(".modal-dialog").addClass("modal-lg"),SbModalBody("<div class = '"+n+"'>"+r+"</div>"),SbModalFooter("<button func = 'HideModal' class = 'btn btn-danger btn-sm click'>cancel</button><button func = 'SaveBLOCK' params = '"+n+"' class = 'btn btn-sm btn-primary click' btype = '"+o+"'>save changes</button>"),methods.ShowModal(),FetchBonus(1,"yuQ23"),FetchBonusCategory(1,"yuQ23"),setTimeout(()=>{methods.InitColor(),$(".color-picker").each(function(t,e){setTimeout(()=>{$(this).trigger("click")},500)}),methods.UpdatePOP(n,o,s)},500);break;case"countdowntimer-block":a=!1,i=[];var s=[{name:"block_color",type:"color_picker",css:"background: #FFFFFF",insert:!1,output:"#FFFFFF"},{name:"background_color",type:"color_picker",css:"background: #FFFFFF",insert:!1,output:"#FFFFFF"},{name:"digit_color",type:"color_picker",css:"background: #FFFFFF",insert:!1,output:"#000000"},{name:"label_color",type:"color_picker",css:"background: #FFFFFF",insert:!1,output:"#000000"},{name:"width",type:"select",css:!1,insert:!1,output:"width: 100%"},{name:"status",type:"select",css:!1,insert:!1,output:"on"},{name:"type",type:"select",css:!1,insert:!1,output:"date-time"},{name:"language",type:"select",css:!1,insert:!1,output:"en"},{name:"on_expiry",type:"select",css:!1,insert:!1,output:"hide"},{name:"timezone",type:"select",css:!1,insert:!1,output:"1.0"},{name:"countdown_end",type:"datetimer",css:!1,insert:!1,output:new Date},{name:"redirect_url",type:"text",css:!1,insert:!1,output:"https://"}],d=(l={id:n,block_type:o,content:s},window.localStorage.getItem("BUILDER_APPLY_BLOCK"));window.first_timer_id=!1;var p=JSON.parse(d);if(!window.first_timer_id)for(let t of p)if(t.block_type==o){window.first_timer_id=t.id;break}if(window.first_timer_id!=n&&!1!==window.first_timer_id)return methods.HideModal(),_app.Error("Timer already created. Please edit the first timer."),!1;if(d){i=JSON.parse(d);for(let t of i)t.id==n&&(a=t.content)}a||(i.push(l),window.localStorage.setItem("BUILDER_APPLY_BLOCK",JSON.stringify(i))),SbModalTitle("COUNTDOWN TIMER BLOCK SETTINGS...");c=[{name:"<b>BLOCK COLOR</b>",html_input:"<button class = 'click color-picker' func = 'InitColor' style = 'background: #ffffff; border: none'><i class = 'fa fa-chevron-down'></i></button>",flex:"col-md-4 col-lg-4"},{name:"<b>BACKGROUND COLOR</b>",html_input:"<button class = 'click color-picker' func = 'InitColor' style = 'background: #ffffff; border: none'><i class = 'fa fa-chevron-down'></i></button>",flex:"col-md-4 col-lg-4"},{name:"WIDTH",html_input:"<select class = 'form-control width'><option value = 'width: 100%'>Contained</option><option value = 'width: 100%'>Page Width</option><option value = 'width: 85%'>85% Width</option></select>",flex:"col-md-4 col-lg-4"},{name:"STATUS",html_input:"<select class = 'form-control status'><option value = 'on'>ON</option><option value = 'off'>OFF</option></select>",flex:"col-md-2 col-lg-2"},{name:"TYPE",html_input:"<select class = 'form-control type'><option value = 'date-time'>Date / Time</option></select>",flex:"col-md-2 col-lg-2"},{name:"COUNTDOWN END(GMT)",html_input:"<input id = 'datetimepicker1' class = 'form-control countdown_end' type = 'text' placeholder = 'click' />",flex:"col-md-4 col-lg-4"},{name:"TIME ZONE",html_input:TimeZone(),flex:"col-md-4 col-lg-4"},{name:"DIGIT COLOR",html_input:"<button class = 'click color-picker' func = 'InitColor' style = 'background: #ffffff; border: none'><i class = 'fa fa-chevron-down'></i></button>",flex:"col-md-4 col-lg-4"},{name:"LABEL COLOR",html_input:"<button class = 'click color-picker' func = 'InitColor' style = 'background: #ffffff; border: none'><i class = 'fa fa-chevron-down'></i></button>",flex:"col-md-4 col-lg-4"},{name:"LANGUAGE",html_input:"<select class = 'form-control language'><option value = 'en'>English</option></select>",flex:"col-md-4 col-lg-4"},{name:"ON EXPIRY",html_input:"<select class = 'form-control on_expiry'><option value = 'hide'>Hide Counter</option><option value = 'redirect'>Redirect</option></select>",flex:"col-md-4 col-lg-4"},{name:"EXPIRY REDIRECT URL",html_input:"<input class = 'form-control redirect_url' type = 'text' />",flex:"col-md-8 col-lg-8"}],r=ConstructUIFull(c);SbModalBody(r),$(".modal-dialog").addClass("modal-lg"),$(".modal-dialog").css("height","600px"),SbModalBody("<div class = '"+n+"'>"+r+"</div>"),SbModalFooter("<button func = 'HideModal' class = 'btn btn-danger btn-sm click'>cancel</button><button func = 'SaveBLOCK' params = '"+n+"' class = 'btn btn-sm btn-primary click' btype = '"+o+"'>save changes</button>"),methods.ShowModal(),setTimeout(()=>{methods.InitColor(),$(".color-picker").each(function(t,e){setTimeout(()=>{$(this).trigger("click")},500)}),methods.UpdatePOP(n,o,s),$("#datetimepicker1").datetimepicker()},500);break;case"social-block":a=!1,i=[],l={id:n,block_type:o,content:s=[{name:"block_color",type:"color_picker",css:"background: #FFFFFF",insert:!1,output:"#FFFFFF"},{name:"width",type:"select",css:"width: 100%",insert:!1,output:"width: 100%"},{name:"align",type:"select",css:"text-align: center",insert:!1,output:"text-align: center"},{name:"css",type:"textarea",css:"apply",insert:!1,output:"padding: 0px\nmargin: 0px"},{name:"fb_text",type:"text",css:!1,insert:!1,output:"https://fb.me",unit:"px"},{name:"twitter_text",type:"text",css:!1,insert:!1,output:"https://twitter.me",unit:"px"}]};if(d=window.localStorage.getItem("BUILDER_APPLY_BLOCK")){i=JSON.parse(d);for(let t of i)t.id==n&&(a=t.content)}a||(i.push(l),window.localStorage.setItem("BUILDER_APPLY_BLOCK",JSON.stringify(i))),SbModalTitle("SOCIAL BLOCK SETTINGS...");c=[{name:"<b>BLOCK COLOR</b>",html_input:"<button class = 'click color-picker' func = 'InitColor' style = 'background: #ffffff; border: none'><i class = 'fa fa-chevron-down'></i></button>",flex:"col-md-6 col-lg-6"},{name:"WIDTH",html_input:"<select class = 'form-control width'><option value = 'width: 100%'>Contained</option><option value = 'width: 85%'>85% Width</option><option value = 'width: 100%'>Page Width</option><option value = 'width: 50%'>50% Width</option></select>",flex:"col-md-6 col-lg-6"},{name:"ALIGN",html_input:"<select class = 'form-control align'><option value = 'text-align: left'>Left</option><option value = 'text-align: center'>Center</option><option value = 'text-align: right'>Right</option></select>",flex:"col-md-6 col-lg-6"},{name:"<b>FACEBOOK TEXT</b>",html_input:"<input class = 'form-control fb_text' type = 'text' placeholder = 'facebook text' />",flex:"col-md-6 col-lg-6"},{name:"TWITTER TEXT",html_input:"<input class = 'form-control twitter_text' type = 'text' placeholder = 'twitter text' />",flex:"col-md-6 col-lg-6"},{name:"<b>CSS PROPERTIES</b> (separate with new line)",html_input:"<textarea rows = '5' class = 'form-control css'></textarea>"}],c=ConstructUIFull(c);SbModalBody("<div class = '"+n+"'>"+c+"</div>"),SbModalFooter("<button func = 'HideModal' class = 'btn btn-danger btn-sm click'>cancel</button><button func = 'SaveBLOCK' params = '"+n+"' class = 'btn btn-sm btn-primary click' btype = '"+o+"'>save changes</button>"),methods.ShowModal(),setTimeout(()=>{methods.InitColor(),$(".color-picker").each(function(t,e){setTimeout(()=>{$(this).trigger("click")},500)}),methods.UpdatePOP(n,o,s)},500)}},methods.SaveSettings=function(t,e){alert("save settings"),$("#page-wrapper").find(".drag-element").each(function(t,e){$(this).removeClass("drag-element")});let o=$("#page-wrapper").html();window.localStorage.setItem("SAVE_PAGE",o),alert(o)},methods.SavePageSetting=function(t,e){var o=window.localStorage.getItem("BUILDER_PAGE_SETTINGS");let n=t;var a=methods.GetModel(n,o),i=-1,l=-1;for(let e of a)switch(l++,e.type){case"number":case"text":case"date":case"input":case"select":c=$("."+t).find("."+e.name).val();a[l].output=c;break;case"checkbox":c=$("."+t).find("."+e.name).prop("checked");a[l].output=c;break;case"textarea":c=$("."+t).find("."+e.name).val();a[l].output=c;break;case"ckeditor":c=CKEDITOR.instances[e.instance].getData();a[l].output=c;break;case"color_picker":i++;var c=$("."+t).find(".pickr > .pcr-button").eq(i).css("color");a[l].output=c,a[l].css="background: "+c}o=methods.SetModel(n,o,a,!1),window.localStorage.setItem("BUILDER_PAGE_SETTINGS",o),methods.HideModal(),_app.Success("Settings Saved!!!")},methods.OpenPageSettings=function(t,e){let o=e.attr("btype");switch(o){case"page-setting":var n=!1,a=[],i={id:o,content:s=[{name:"page_name",type:"text",css:!1,insert:!1,output:"",unit:"px"},{name:"affiliate_new_window",type:"checkbox",css:!1,insert:!1,output:!1,unit:"px"},{name:"affiliate_link",type:"text",css:!1,insert:!1,output:"",unit:"px"},{name:"redirect_url_paused",type:"text",css:!1,insert:!1,output:"",unit:"px"},{name:"redirect_url_expire",type:"text",css:!1,insert:!1,output:"",unit:"px"},{name:"custom_code_head",type:"text",css:!1,insert:!1,output:"",unit:"px"},{name:"custom_code_footer",type:"text",css:!1,insert:!1,output:"",unit:"px"}]};if(d=window.localStorage.getItem("BUILDER_PAGE_SETTINGS")){a=JSON.parse(d);for(let t of a)t.id==o&&(n=t.content)}n||(a.push(i),window.localStorage.setItem("BUILDER_PAGE_SETTINGS",JSON.stringify(a))),SbModalTitle("PAGE SETTINGS...");var l=[{name:"<b>Bonus Page Name</b>",html_input:"<input class = 'form-control page_name' type = 'text' placeholder = 'page name' />"},{name:"<b>Affiliate Link</b> -  open in new window: <input class = 'affiliate_new_window' type = 'checkbox' />",html_input:"<input class = 'form-control affiliate_link' type = 'text' placeholder = 'affiliate link you are promoting' />"},{name:"<b>Redirect URL if paused</b>",html_input:"<input class = 'form-control redirect_url_paused' type = 'text' placeholder = 'redirect URL' />"},{name:"<b>Custom Code (HEAD SECTION)</b>",html_input:"<textarea rows = '5' class = 'form-control custom_code_head'></textarea>"},{name:"<b>Custom Code (FOOTER SECTION)</b>",html_input:"<textarea rows = '5' class = 'form-control custom_code_footer'></textarea>"},{name:"<b>Redirect URL if Countdown Timer expires</b>",html_input:"<input class = 'form-control redirect_url_expire' type = 'text' placeholder = 'redirect URL' />"}],c=ConstructUI(l);SbModalBody("<div class = '"+o+"'>"+c+"</div>"),SbModalFooter("<button func = 'HideModal' class = 'btn btn-danger btn-sm click'>cancel</button><button params = 'page-setting' func = 'SavePageSetting' class = 'btn btn-sm btn-primary click'>save changes</button>"),methods.ShowModal(),setTimeout(()=>{methods.UpdatePOP2(o,s)},500);break;case"seo":n=!1,a=[],i={id:o,content:s=[{name:"page_title",type:"text",css:!1,insert:!1,output:"",unit:"px"},{name:"meta_desc",type:"textarea",css:!1,insert:!1,output:"",unit:"px"},{name:"keyword",type:"text",css:!1,insert:!1,output:"",unit:"px"}]};if(d=window.localStorage.getItem("BUILDER_PAGE_SETTINGS")){a=JSON.parse(d);for(let t of a)t.id==o&&(n=t.content)}n||(a.push(i),window.localStorage.setItem("BUILDER_PAGE_SETTINGS",JSON.stringify(a))),SbModalTitle("SEO SETTINGS...");l=[{name:"<b>Page Title</b>",html_input:"<input class = 'form-control page_title' type = 'text' placeholder = 'Page Title' />"},{name:"<b>Meta Description</b>",html_input:"<textarea class = 'form-control meta_desc' placeholder = 'meta description'></textarea>"},{name:"<b>SEO keywords</b>",html_input:"<input class = 'form-control keyword' type = 'textarea' placeholder = 'keywords' />"}],c=ConstructUI(l);SbModalBody("<div class = '"+o+"'>"+c+"</div>"),SbModalFooter("<button func = 'HideModal' class = 'btn btn-danger btn-sm click'>cancel</button><button params = 'seo' func = 'SavePageSetting' class = 'btn btn-sm btn-primary click'>save changes</button>"),methods.ShowModal(),setTimeout(()=>{methods.UpdatePOP2(o,s)},500);break;case"page-colors":n=!1,a=[],i={id:o,content:s=[{name:"outer_color",type:"color_picker",css:!1,insert:!1,output:"#FFFFFF",unit:"px"},{name:"inner_color",type:"color_picker",css:!1,insert:!1,output:"#FFFFFF",unit:"px"},{name:"tile",type:"checkbox",css:!1,insert:!1,output:!1,unit:"px"},{name:"background_url",type:"text",css:!1,insert:!1,output:"",unit:"px"}]};if(d=window.localStorage.getItem("BUILDER_PAGE_SETTINGS")){a=JSON.parse(d);for(let t of a)t.id==o&&(n=t.content)}n||(a.push(i),window.localStorage.setItem("BUILDER_PAGE_SETTINGS",JSON.stringify(a))),SbModalTitle("PAGE COLOR SETTINGS...");var r=ConstructUI([{name:"<b>OUTER COLOR</b>",html_input:"<input class = 'btn click color-picker outer_block' func = 'InitColor' style = '' />"},{name:"<b>INNER COLOR</b>",html_input:"<input class = 'btn click color-picker inner_color' func = 'InitColor' style = '' />"},{name:"<br>",html_input:"<br>"},{name:"<b>BACKGROUND URL</b> Tile: <input class = 'tile' type = 'checkbox' />",html_input:"<input type = 'text' class = 'form-control background_url' placeholder = 'background url' />"}]);SbModalBody("<div class = '"+o+"'>"+r+"</div>"),SbModalFooter("<button func = 'HideModal' class = 'btn btn-danger btn-sm click'>cancel</button><button class = 'btn btn-sm btn-primary click' params = 'page-colors' func = 'SavePageSetting'>save changes</button>"),methods.ShowModal(),setTimeout(()=>{methods.InitColor(),$(".color-picker").each(function(t,e){setTimeout(()=>{$(this).trigger("click")},500)}),methods.UpdatePOP2(o,s)},500);break;case"bonus-delivery-page":var s,d;n=!1,a=[],i={id:o,content:s=[{name:"bonus_delivery_header",type:"ckeditor",css:!1,insert:!1,instance:"bonus-delivery-header",output:"delivery header",unit:"px"},{name:"file_name",type:"text",css:!1,insert:!1,output:"",unit:"px"}]};if(d=window.localStorage.getItem("BUILDER_PAGE_SETTINGS")){a=JSON.parse(d);for(let t of a)t.id==o&&(n=t.content)}n||(a.push(i),window.localStorage.setItem("BUILDER_PAGE_SETTINGS",JSON.stringify(a))),SbModalTitle("BONUS DELIVERY PAGE SETTINGS...");var p=ConstructUIFull([{name:"BONUS DELIVERY HEADER",html_input:"<div id = 'bonus-delivery-header' contenteditable = 'true'></div>"},{name:"Delivery file name",html_input:"<input class = 'form-control file_name' type = 'text' placeholder = 'file name' />"}]);SbModalBody("<div class = '"+o+"'>"+p+"</div>"),SbModalFooter("<button func = 'HideModal' class = 'btn btn-danger btn-sm click'>cancel</button><button class = 'btn btn-sm btn-primary click' params = 'bonus-delivery-page' func = 'SavePageSetting'>save changes</button>"),methods.ShowModal(),setTimeout(()=>{CKEDITOR.replace("bonus-delivery-header"),methods.UpdatePOP2(o,s)},500)}},methods.ClearPageStore=function(){window.localStorage.removeItem("SAVE_PAGE"),window.localStorage.removeItem("BUILDER_APPLY_BLOCK"),window.localStorage.removeItem("BUILDER_PAGE_SETTINGS"),window.localStorage.removeItem("BUILDER_PAGE_ID"),window.location.href=window.location.href.toString()},methods.InitColor=function(){var t=Pickr.create({el:".color-picker",theme:"nano",swatches:["rgba(244, 67, 54, 1)","rgba(233, 30, 99, 0.95)","rgba(156, 39, 176, 0.9)","rgba(103, 58, 183, 0.85)","rgba(63, 81, 181, 0.8)","rgba(33, 150, 243, 0.75)","rgba(3, 169, 244, 0.7)","rgba(0, 188, 212, 0.7)","rgba(0, 150, 136, 0.75)","rgba(76, 175, 80, 0.8)","rgba(139, 195, 74, 0.85)","rgba(205, 220, 57, 0.9)","rgba(255, 235, 59, 0.95)","rgba(255, 193, 7, 1)"],components:{preview:!0,opacity:!0,hue:!0,interaction:{hex:!0,rgba:!0,input:!0}},strings:{}});t.on("save",(t,e)=>{}),t.on("change",(e,o)=>{let n=e.toHEXA();t.setColor(""+n)})},methods.GetModel=function(t,e){if(e){var o=JSON.parse(e);for(let e of o)if(e.id==t)return e.content}},methods.SetModel=function(t,e,o,n=!1){if(e){var a=JSON.parse(e);for(var i in a)a[i].id==t&&(a[i].block_type=n,a[i].content=o);return JSON.stringify(a)}return!1},methods.SaveBLOCK=function(t,e){var o=window.localStorage.getItem("BUILDER_APPLY_BLOCK");let n=t,a=e.attr("btype");var i=methods.GetModel(n,o);switch(window.first_timer_id=!1,a){case"countdowntimer-block":var l=JSON.parse(o);if(!window.first_timer_id)for(let t of l)if(t.block_type==a){window.first_timer_id=t.id,i=t.content;break}if(window.first_timer_id!=n)return methods.HideModal(),_app.Error("Timer already created. Please edit the first timer."),!1}var c=-1,r=-1;for(let e of i){if(r++,e.css&&"apply"!==e.css&&"color_picker"!==e.type)(s=$("."+t).find("."+e.name).val()).split(":").length<2?i[r].css=e.name+":"+s+e.unit:i[r].css=s;switch(e.insert,e.type){case"number":case"text":case"date":s=$("."+t).find("."+e.name).val();i[r].output=s;break;case"datetimer":s=$("."+t).find("."+e.name).data("DateTimePicker").date();i[r].output=s;break;case"input":case"select":s=$("."+t).find("."+e.name).val();i[r].output=s;break;case"checkbox":s=$("."+t).find("."+e.name).prop("checked");i[r].output=s;break;case"textarea":s=$("."+t).find("."+e.name).val();i[r].output=s;break;case"color_picker":c++;var s=$("."+t).find(".pickr > .pcr-button").eq(c).css("color");i[r].output=s,i[r].css="background: "+s}}if(o=methods.SetModel(n,o,i,a),window.localStorage.setItem("BUILDER_APPLY_BLOCK",o),o){var d=JSON.parse(o);for(let t of d)if(t.id==n){$("#"+t.id).css("all","revert");for(let e of t.content){if(e.insert,"apply"==e.css){var p=e.output.replace(/;/gi,""),u=(p=(p=p.replace(/https:\/\//gi,"//")).replace(/http:\/\//gi,"//")).split("\n");for(var m in u){var b=u[m].split(":");for(var f in b)b[f]=b[f].trim();a,$("#"+t.id).css(b[0],b[1])}}if("apply"!=e.css&&!1!==e.css&&"cta-block"!==a&&"countdowntimer-block"!==a){u=e.css.split(":");for(var m in u)u[m]=u[m].trim();switch($("#"+t.id).css(u[0],u[1]),a){case"image-block":$("#"+t.id).css("width","100%"),$("#"+t.id).find("img").css(u[0],u[1]);break;case"video-block":$("#"+t.id).css("width","100%"),$("#"+t.id).find("iframe").css(u[0],u[1])}}switch(a){case"image-block":"image_url"==e.name&&$("#"+t.id).find("img").attr("src",e.output);break;case"video-block":"embed_code"==e.name&&$("#"+t.id).html(e.output);break;case"cta-block":SetCTA2(t,e);break;case"countdowntimer-block":SetCountdown(t,e);break;case"bonus-block":var g=window.localStorage.getItem("CURRENT_BONUS");$("#"+t.id).html(g)}}methods.HideModal()}}$(".modal-dialog").removeClass("modal-lg")},methods.URL=function(){return{fetch_bonus:"./fetch-bonus",get_bonus:"./fetch-a-bonus",preview_bonus:"./fetch-a-bonus",fetch_bonus_category:"./fetch-bonus-category",fetch_category_content:"./fetch-bonus-category-content",save_page:"./save-page"}},methods.ExportPage=function(t,e){methods.ResetModal();var o=window.localStorage.getItem("SAVE_PAGE"),n=window.localStorage.getItem("BUILDER_APPLY_BLOCK"),a=window.localStorage.getItem("BUILDER_PAGE_SETTINGS"),i=JSON.parse(a),l=Object.keys(i);if(o){if(!l.includes("0"))return _app.Error("Page title is required"),$("[href='#settings']").trigger("click"),void $("[btype='seo']").trigger("click");if(!l.includes("1"))return _app.Error("Affiliate link is required"),$("[href='#settings']").trigger("click"),void $("[btype='page-setting']").trigger("click");if(!l.includes("2"))return _app.Error("Enter bonus delivery settings"),$("[href='#settings']").trigger("click"),void $("[btype='bonus-delivery-page']").trigger("click");for(let t of i)switch(t.id){case"seo":var c=t.content;for(let t of c)if("page_title"==t.name&&!t.output)return _app.Error("Page Title is required"),$("[href='#settings']").trigger("click"),$("[btype='seo']").trigger("click"),!1;break;case"bonus-delivery-page":break;case"page-setting":c=t.content;for(let t of c)if("affiliate_link"==t.name&&!t.output)return _app.Error("Affiliate link is required"),$("[href='#settings']").trigger("click"),$("[btype='page-setting']").trigger("click"),!1}var r=btoa(o),s=btoa(n),d=btoa(a),p={id:window.localStorage.getItem("BUILDER_PAGE_ID"),full_page:r,model:s,setting:d},u=methods.URL().save_page,m=p;_app.Ajax(u,m,"json",function(t){alert(t);var e=[];for(let t of[{title:"Download page & upload to your server",download_filename:"review-page",input:"<button class = 'btn btn-primary'><i class = 'fa fa-download'></i> Download</button>",type:"download"},{title:"Bonus Review Page URL",url:"https://affilimatepro.com/review/page_id",type:"review",input:"<input class = 'form-control' type = 'text' value = 'https://affilimatepro.com/review/page_id' />"},{title:"Hosted Thankyou Page URL",thankyou_url:"https://affilimatepro.com/bonus/page_id",type:"thankyou",input:"<input class = 'form-control' type = 'text' value = 'https://affilimatepro.com/bonus/page_id' />"}])e.push("<div class = 'row p-3'><div class = 'col-sm-5 col-md-5'><b>"+t.title+"</b></div>"),e.push("<div class = 'col-sm-7 col-md-7'>"+t.input+"</div></div>"),e.push("<hr>");var o="<div class = ''>"+e.join("")+"</div>";$(".modal-dialog").addClass("modal-md"),_app.Success("Exported successfully!"),SbModalTitle("Export your bonus review page"),SbModalBody(o),methods.ShowModal()})}else _app.Error("Empty page")},window.localStorage.getItem("BUILDER_APPLY_BLOCK")||window.localStorage.setItem("BUILDER_APPLY_BLOCK",JSON.stringify([])),window.localStorage.getItem("BUILDER_PAGE_SETTINGS")||window.localStorage.setItem("BUILDER_PAGE_SETTINGS",JSON.stringify([])),!window.localStorage.getItem("BUILDER_PAGE_ID")){var rander=Math.floor(100*Math.random())+1;window.localStorage.setItem("BUILDER_PAGE_ID",(new Date).getTime()+""+rander)}setInterval(()=>{lock_save||($("#page-wrapper").find(".drag-element").each(function(t,e){$(this).removeClass("drag-element"),$(this).addClass("drag-element-added")}),window.localStorage.setItem("SAVE_PAGE",$("#page-wrapper").html()))},5e3);
